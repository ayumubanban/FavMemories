<% @posts.each do |post| %>
  <article class="media">
    <figure class="media-left">
      <p class="image is-96x96">

        <% if post.user.avatar.attached? %>
          <%= image_tag post.user.avatar, class: "is-rounded" %>
        <% elsif post.user.image %>
          <%= image_tag post.user.image, class: "is-rounded" %>
        <% else %>
          <img src="/blue_egg.jpg" class="is-rounded">
        <% end %>

      </p>
    </figure>
    <div class="media-content">
      <div class="content">
        <p>
          <strong><%= link_to(post.user.name, "/users/#{post.user.id}", class: "has-text-black") %></strong>
          <br>
          <%= link_to(post.content, "/posts/#{post.id}", class: "has-text-dark") %>
          <% if post.photo.attached? %>
            <%= link_to image_tag(post.photo, class: "is-rounded"), post.photo, class: "popup-link" %>
            <%#= link_to image_tag(@user.avatar, class: "is-rounded"), @user.avatar, class: "popup-link" %>
          <% end %>
        </p>
      </div>

      <nav class="level is-mobile">
        <div class="level-left">
          <%# リンクにせんでもええかなと思い、aタグを外した←いや、とりまリンクにしといて、コメント投稿用のモーダルを表示されられるといいよね %>
          <span class="level-item icon is-small has-text-info"><i class="fa fa-reply"></i></span><%= post.comments.count %>

          <%# いいね ajax %>
          <div id="likes_buttons_<%= post.id %>">
            <%= render partial: 'likes/like', locals: { post: post } %>
          </div>

        </div>
      </nav>
    </div>
  </article>
<% end %>